<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Profile Screen</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#ea2a33",
              "background-light": "#f8f6f6",
              "background-dark": "#211111",
            },
            fontFamily: { "display": ["Spline Sans"] },
            borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
          },
        },
      }
</script>
<style>
    body { min-height: max(884px, 100dvh); }
    [x-cloak] { display: none !important; }
</style>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display" x-data="userProfile">

<div class="relative flex h-auto min-h-screen w-full flex-col">
    <div class="flex items-center p-4 pb-2 justify-between">
        <div class="text-slate-900 dark:text-white flex size-12 shrink-0 items-center">
            <a href="index.html"><span class="material-symbols-outlined">arrow_back</span></a>
        </div>
        <h2 class="text-slate-900 dark:text-white text-lg font-bold leading-tight flex-1 text-center">Profile</h2>
        <div class="size-12"></div>
    </div>

    <div class="flex flex-col items-center mt-4">
        <div class="bg-center bg-no-repeat bg-cover rounded-full h-32 w-32 shadow-lg" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCjZKd_FSd2dk2btvPDx_P2v2jX4hU3uU0IusAkKNulead5csuWjGOPxvdiPmyT5Mcqfb4c35ITjI1yN2JhQEhSDHZCGr8zmBpA3sJWMKLEqMhwlFOgLyscNKR9dCrGbGpMFHNwe_QwAu8fNAWVfPShEs43FfI6MZEVhpXjsPXRtPq-AXLquWWb0XhjnUbyaHTiImcxNf4oT4DX8WptDN7L3o6tw-BEoojjVhYJoxDvRDui26EUNy23YHn39izz-kRsn2bGOE-hhfG4");'></div>
        <p class="text-slate-900 dark:text-white text-[22px] font-bold mt-4">Alex Doe</p>
        <p class="text-slate-500 dark:text-slate-400 text-base">@alexdoe</p>
    </div>

    <div class="px-4 flex flex-col gap-8 mt-8">
        <div class="flex flex-col gap-2">
            <h3 class="text-slate-900 dark:text-white text-lg font-bold pb-2">Preferences</h3>
            <div class="flex flex-col gap-1 bg-slate-200/50 dark:bg-slate-800/20 rounded-xl p-2">
                
                <button @click="showCountryModal = true" class="flex items-center gap-4 p-3 rounded-lg hover:bg-slate-300/50 dark:hover:bg-slate-700/30 transition-colors w-full text-left">
                    <div class="flex items-center justify-center rounded-lg bg-slate-300 dark:bg-slate-800 shrink-0 size-10 text-slate-900 dark:text-white">
                        <span class="material-symbols-outlined">public</span>
                    </div>
                    <div class="flex flex-col flex-1">
                        <p class="text-slate-900 dark:text-white text-base font-normal">Pays (Catalogue)</p>
                        <p class="text-slate-500 dark:text-slate-400 text-sm" x-text="countryName"></p>
                    </div>
                    <span class="material-symbols-outlined text-slate-400">chevron_right</span>
                </button>

                <a href="platforms.html" class="flex items-center gap-4 p-3 rounded-lg hover:bg-slate-300/50 dark:hover:bg-slate-700/30 transition-colors w-full text-left">
                    <div class="flex items-center justify-center rounded-lg bg-slate-300 dark:bg-slate-800 shrink-0 size-10 text-slate-900 dark:text-white">
                        <span class="material-symbols-outlined">filter_list</span>
                    </div>
                    <div class="flex flex-col flex-1">
                        <p class="text-slate-900 dark:text-white text-base font-normal">Mes Plateformes</p>
                        <p class="text-slate-500 dark:text-slate-400 text-sm"><span x-text="platformCount"></span> sélectionnées</p>
                    </div>
                    <span class="material-symbols-outlined text-slate-400">chevron_right</span>
                </a>
            </div>
        </div>
    </div>
</div>

<div x-show="showCountryModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm" x-cloak x-transition.opacity>
    <div @click.away="showCountryModal = false" class="bg-white dark:bg-[#1a1a1a] w-full max-w-xs rounded-2xl shadow-2xl overflow-hidden p-4">
        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4 text-center">Choisir le pays</h3>
        <div class="space-y-2">
            <button @click="setCountry('FR')" class="flex items-center w-full p-3 rounded-xl border transition-all" 
                :class="country === 'FR' ? 'border-primary bg-primary/10' : 'border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800'">
                <img src="https://flagcdn.com/w40/fr.png" class="w-8 rounded shadow-sm mr-3">
                <span class="flex-1 text-left font-medium text-gray-900 dark:text-white">France</span>
                <span x-show="country === 'FR'" class="material-symbols-outlined text-primary">check_circle</span>
            </button>
            
            <button @click="setCountry('IE')" class="flex items-center w-full p-3 rounded-xl border transition-all" 
                :class="country === 'IE' ? 'border-primary bg-primary/10' : 'border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800'">
                <img src="https://flagcdn.com/w40/ie.png" class="w-8 rounded shadow-sm mr-3">
                <span class="flex-1 text-left font-medium text-gray-900 dark:text-white">Irlande</span>
                <span x-show="country === 'IE'" class="material-symbols-outlined text-primary">check_circle</span>
            </button>
        </div>
        <button @click="showCountryModal = false" class="mt-4 w-full py-3 text-sm font-medium text-gray-500 hover:text-gray-900 dark:hover:text-gray-300">Annuler</button>
    </div>
</div>

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('userProfile', () => ({
            showCountryModal: false,
            country: localStorage.getItem('userRegion') || 'FR',
            
            get countryName() {
                return this.country === 'FR' ? 'France' : 'Irlande';
            },
            
            get platformCount() {
                const saved = localStorage.getItem('selectedPlatforms');
                return saved ? JSON.parse(saved).length : 0;
            },

            setCountry(code) {
                this.country = code;
                localStorage.setItem('userRegion', code);
                this.showCountryModal = false;
            }
        }));
    });
</script>
</body>
</html>
